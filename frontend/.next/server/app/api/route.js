/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/route";
exports.ids = ["app/api/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_paulobarbosa_git_fcta_chatbot_frontend_src_app_api_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/route.ts */ \"(rsc)/./src/app/api/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/route\",\n        pathname: \"/api\",\n        filename: \"route\",\n        bundlePath: \"app/api/route\"\n    },\n    resolvedPagePath: \"/Users/paulobarbosa/git/fcta-chatbot/frontend/src/app/api/route.ts\",\n    nextConfigOutput,\n    userland: _Users_paulobarbosa_git_fcta_chatbot_frontend_src_app_api_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBhdWxvYmFyYm9zYSUyRmdpdCUyRmZjdGEtY2hhdGJvdCUyRmZyb250ZW5kJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnBhdWxvYmFyYm9zYSUyRmdpdCUyRmZjdGEtY2hhdGJvdCUyRmZyb250ZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNrQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3BhdWxvYmFyYm9zYS9naXQvZmN0YS1jaGF0Ym90L2Zyb250ZW5kL3NyYy9hcHAvYXBpL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9wYXVsb2JhcmJvc2EvZ2l0L2ZjdGEtY2hhdGJvdC9mcm9udGVuZC9zcmMvYXBwL2FwaS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/route.ts":
/*!******************************!*\
  !*** ./src/app/api/route.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _utils_formatSelections__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/formatSelections */ \"(rsc)/./src/utils/formatSelections.tsx\");\n/* harmony import */ var _azure_data_tables__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @azure/data-tables */ \"(rsc)/./node_modules/@azure/data-tables/dist-esm/src/TableClient.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var _config_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/config/config */ \"(rsc)/./src/config/config.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\n\n// Initialize Azure Table Client\nconst tableClient = _azure_data_tables__WEBPACK_IMPORTED_MODULE_5__.TableClient.fromConnectionString(_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].azureStorageConnectionString, _config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].azureTableName);\n// Read and cache the base prompt when the module is loaded\nconst basePromptPath = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), 'src', 'config', 'systemPrompt.txt');\nlet basePrompt = '';\ntry {\n    basePrompt = fs__WEBPACK_IMPORTED_MODULE_3___default().readFileSync(basePromptPath, 'utf8');\n    console.log('Base prompt loaded successfully.');\n} catch (error) {\n    console.error('Error reading basePrompt.txt:', error);\n    // Handle the error as needed, possibly setting a default prompt or exiting\n    basePrompt = 'You are a sophisticated and knowledgeable travel advisor...'; // Fallback prompt\n}\nasync function POST(req) {\n    try {\n        // 1. Parse Body\n        // We expect the front end to send either:\n        //   { userSelections, oauthToken, previousMessages }\n        // or \n        //   { query, oauthToken, previousMessages }\n        const { query, userSelections, oauthToken, previousMessages = [] } = await req.json();\n        // 2. Validate OAuth token\n        if (!oauthToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'OAuth token is missing'\n            }, {\n                status: 400\n            });\n        }\n        // 3. Handle input: if we received structured JSON, convert it to text query\n        let finalQuery = query;\n        if (!finalQuery && userSelections) {\n            finalQuery = (0,_utils_formatSelections__WEBPACK_IMPORTED_MODULE_1__.formatSelectionsForQuery)(userSelections);\n        }\n        if (!finalQuery) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'No query or userSelections provided'\n            }, {\n                status: 400\n            });\n        }\n        // 4. Generate a unique Interaction ID\n        const interactionId = (0,uuid__WEBPACK_IMPORTED_MODULE_6__[\"default\"])();\n        // 5. Generate the current date for PartitionKey\n        const date = new Date();\n        const year = date.getUTCFullYear();\n        const month = String(date.getUTCMonth() + 1).padStart(2, '0');\n        const day = String(date.getUTCDate()).padStart(2, '0');\n        const currentDate = `${year}${month}${day}`;\n        // Step 1: Perform vector search using Databricks API\n        const vectorSearchResponse = await fetch(`${_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].databricksHost}/api/2.0/vector-search/indexes/${_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].vectorSearchIndexName}/query`, {\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer ${_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].databricksApiToken}`,\n                'Content-Type': 'application/json;charset=UTF-8',\n                Accept: 'application/json'\n            },\n            body: JSON.stringify({\n                num_results: _config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].numVectorResults,\n                columns: [\n                    'content_chunk'\n                ],\n                query_text: finalQuery\n            })\n        });\n        if (!vectorSearchResponse.ok) {\n            throw new Error(`Vector search failed: Databricks token: ${_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].databricksApiToken} ${await vectorSearchResponse.text()}`);\n        }\n        const vectorData = await vectorSearchResponse.json();\n        // Step 2: Combine vectorized chunks into context\n        const relevantContext = vectorData.result.data_array.map(([content])=>content).join('\\n');\n        // Step 3: Send combined context, query, and system prompt to the Llama endpoint\n        const llamaResponse = await fetch(_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].llamaEndpointUrl, {\n            method: 'POST',\n            headers: {\n                Authorization: `Basic ${Buffer.from(`token:${_config_config__WEBPACK_IMPORTED_MODULE_2__[\"default\"].databricksApiToken}`).toString('base64')}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                messages: [\n                    {\n                        role: 'system',\n                        content: `${basePrompt}\\n\\n${relevantContext}`\n                    },\n                    ...previousMessages,\n                    {\n                        role: 'user',\n                        content: finalQuery\n                    }\n                ]\n            })\n        });\n        if (!llamaResponse.ok) {\n            throw new Error(`Llama API error: ${await llamaResponse.text()}`);\n        }\n        const llamaData = await llamaResponse.json();\n        // Log llamaData for debugging\n        console.log('Llama API Response:', JSON.stringify(llamaData, null, 2));\n        // Extract the assistant's response from the Llama API response\n        const assistantResponse = llamaData.choices?.[0]?.message?.content || 'No response received.';\n        // Step 4: Store interaction data in Azure Storage Tables\n        const interactionEntity = {\n            partitionKey: currentDate,\n            rowKey: interactionId,\n            timestamp: new Date().toISOString(),\n            userSelections: JSON.stringify(userSelections || {}),\n            query: finalQuery,\n            assistantResponse: assistantResponse\n        };\n        await tableClient.createEntity(interactionEntity);\n        // Step 5: Respond with the result and interaction ID\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            interactionId: interactionId,\n            manifest: vectorData.manifest,\n            result: {\n                row_count: 1,\n                data_array: [\n                    [\n                        assistantResponse,\n                        1.0\n                    ]\n                ]\n            }\n        });\n    } catch (error) {\n        console.error('Error in chat API route:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to process request',\n            details: error instanceof Error ? error.message : 'Unknown error occurred'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztZQUNsREQsT0FBT007WUFDUDhDLG1CQUFtQkE7UUFDckI7UUFFQSxNQUFNbkUsWUFBWTJFLFlBQVksQ0FBQ0w7UUFFL0IscURBQXFEO1FBQ3JELE9BQU85RSxxREFBWUEsQ0FBQzJCLElBQUksQ0FBQztZQUN2QkcsZUFBZUE7WUFDZnNELFVBQVV2QixXQUFXdUIsUUFBUTtZQUM3QnJCLFFBQVE7Z0JBQ05zQixXQUFXO2dCQUNYckIsWUFBWTtvQkFBQzt3QkFBQ1c7d0JBQW1CO3FCQUFJO2lCQUFDO1lBQ3hDO1FBQ0Y7SUFFRixFQUFFLE9BQU92RCxPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE9BQU9wQixxREFBWUEsQ0FBQzJCLElBQUksQ0FDdEI7WUFDRVAsT0FBTztZQUNQa0UsU0FBU2xFLGlCQUFpQnVDLFFBQVF2QyxNQUFNeUQsT0FBTyxHQUFHO1FBQ3BELEdBQ0E7WUFBRWpELFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcGF1bG9iYXJib3NhL2dpdC9mY3RhLWNoYXRib3QvZnJvbnRlbmQvc3JjL2FwcC9hcGkvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGZvcm1hdFNlbGVjdGlvbnNGb3JRdWVyeSB9IGZyb20gJ0AvdXRpbHMvZm9ybWF0U2VsZWN0aW9ucyc7XG5pbXBvcnQgeyBUYWJsZUNsaWVudCwgVGFibGVFbnRpdHkgfSBmcm9tICdAYXp1cmUvZGF0YS10YWJsZXMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnL2NvbmZpZyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIEluaXRpYWxpemUgQXp1cmUgVGFibGUgQ2xpZW50XG5jb25zdCB0YWJsZUNsaWVudCA9IFRhYmxlQ2xpZW50LmZyb21Db25uZWN0aW9uU3RyaW5nKGNvbmZpZy5henVyZVN0b3JhZ2VDb25uZWN0aW9uU3RyaW5nLCBjb25maWcuYXp1cmVUYWJsZU5hbWUpO1xuXG4vLyBSZWFkIGFuZCBjYWNoZSB0aGUgYmFzZSBwcm9tcHQgd2hlbiB0aGUgbW9kdWxlIGlzIGxvYWRlZFxuY29uc3QgYmFzZVByb21wdFBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3NyYycsICdjb25maWcnLCAnc3lzdGVtUHJvbXB0LnR4dCcpO1xubGV0IGJhc2VQcm9tcHQgPSAnJztcblxudHJ5IHtcbiAgYmFzZVByb21wdCA9IGZzLnJlYWRGaWxlU3luYyhiYXNlUHJvbXB0UGF0aCwgJ3V0ZjgnKTtcbiAgY29uc29sZS5sb2coJ0Jhc2UgcHJvbXB0IGxvYWRlZCBzdWNjZXNzZnVsbHkuJyk7XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIGJhc2VQcm9tcHQudHh0OicsIGVycm9yKTtcbiAgLy8gSGFuZGxlIHRoZSBlcnJvciBhcyBuZWVkZWQsIHBvc3NpYmx5IHNldHRpbmcgYSBkZWZhdWx0IHByb21wdCBvciBleGl0aW5nXG4gIGJhc2VQcm9tcHQgPSAnWW91IGFyZSBhIHNvcGhpc3RpY2F0ZWQgYW5kIGtub3dsZWRnZWFibGUgdHJhdmVsIGFkdmlzb3IuLi4nOyAvLyBGYWxsYmFjayBwcm9tcHRcbn1cblxuaW50ZXJmYWNlIFZlY3RvclNlYXJjaFJlc3BvbnNlIHtcbiAgbWFuaWZlc3Q6IHtcbiAgICBjb2x1bW5fY291bnQ6IG51bWJlcjtcbiAgICBjb2x1bW5zOiB7IG5hbWU6IHN0cmluZyB9W107XG4gIH07XG4gIHJlc3VsdDoge1xuICAgIHJvd19jb3VudDogbnVtYmVyO1xuICAgIGRhdGFfYXJyYXk6IEFycmF5PFtzdHJpbmcsIG51bWJlcl0+O1xuICB9O1xufVxuXG5pbnRlcmZhY2UgTGxhbWFSZXNwb25zZSB7XG4gIGNob2ljZXM/OiBBcnJheTx7XG4gICAgbWVzc2FnZT86IHtcbiAgICAgIGNvbnRlbnQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgfT47XG4gIC8vIERlZmluZSBvdGhlciBmaWVsZHMgYXMgbmVlZGVkXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyAxLiBQYXJzZSBCb2R5XG4gICAgLy8gV2UgZXhwZWN0IHRoZSBmcm9udCBlbmQgdG8gc2VuZCBlaXRoZXI6XG4gICAgLy8gICB7IHVzZXJTZWxlY3Rpb25zLCBvYXV0aFRva2VuLCBwcmV2aW91c01lc3NhZ2VzIH1cbiAgICAvLyBvciBcbiAgICAvLyAgIHsgcXVlcnksIG9hdXRoVG9rZW4sIHByZXZpb3VzTWVzc2FnZXMgfVxuICAgIGNvbnN0IHsgcXVlcnksIHVzZXJTZWxlY3Rpb25zLCBvYXV0aFRva2VuLCBwcmV2aW91c01lc3NhZ2VzID0gW10gfSA9IGF3YWl0IHJlcS5qc29uKCk7XG5cbiAgICAvLyAyLiBWYWxpZGF0ZSBPQXV0aCB0b2tlblxuICAgIGlmICghb2F1dGhUb2tlbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnT0F1dGggdG9rZW4gaXMgbWlzc2luZycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIDMuIEhhbmRsZSBpbnB1dDogaWYgd2UgcmVjZWl2ZWQgc3RydWN0dXJlZCBKU09OLCBjb252ZXJ0IGl0IHRvIHRleHQgcXVlcnlcbiAgICBsZXQgZmluYWxRdWVyeSA9IHF1ZXJ5O1xuICAgIGlmICghZmluYWxRdWVyeSAmJiB1c2VyU2VsZWN0aW9ucykge1xuICAgICAgZmluYWxRdWVyeSA9IGZvcm1hdFNlbGVjdGlvbnNGb3JRdWVyeSh1c2VyU2VsZWN0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKCFmaW5hbFF1ZXJ5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdObyBxdWVyeSBvciB1c2VyU2VsZWN0aW9ucyBwcm92aWRlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIDQuIEdlbmVyYXRlIGEgdW5pcXVlIEludGVyYWN0aW9uIElEXG4gICAgY29uc3QgaW50ZXJhY3Rpb25JZCA9IHV1aWR2NCgpO1xuXG4gICAgLy8gNS4gR2VuZXJhdGUgdGhlIGN1cnJlbnQgZGF0ZSBmb3IgUGFydGl0aW9uS2V5XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldFVUQ01vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldFVUQ0RhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGAke3llYXJ9JHttb250aH0ke2RheX1gO1xuXG4gICAgLy8gU3RlcCAxOiBQZXJmb3JtIHZlY3RvciBzZWFyY2ggdXNpbmcgRGF0YWJyaWNrcyBBUElcbiAgICBjb25zdCB2ZWN0b3JTZWFyY2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYCR7Y29uZmlnLmRhdGFicmlja3NIb3N0fS9hcGkvMi4wL3ZlY3Rvci1zZWFyY2gvaW5kZXhlcy8ke2NvbmZpZy52ZWN0b3JTZWFyY2hJbmRleE5hbWV9L3F1ZXJ5YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Y29uZmlnLmRhdGFicmlja3NBcGlUb2tlbn1gLCAvLyBVc2UgdGhlIHNlcnZpY2UgdG9rZW5cbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOCcsXG4gICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBudW1fcmVzdWx0czogY29uZmlnLm51bVZlY3RvclJlc3VsdHMsXG4gICAgICAgICAgY29sdW1uczogWydjb250ZW50X2NodW5rJ10sXG4gICAgICAgICAgcXVlcnlfdGV4dDogZmluYWxRdWVyeSxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmICghdmVjdG9yU2VhcmNoUmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVmVjdG9yIHNlYXJjaCBmYWlsZWQ6IERhdGFicmlja3MgdG9rZW46ICR7Y29uZmlnLmRhdGFicmlja3NBcGlUb2tlbn0gJHthd2FpdCB2ZWN0b3JTZWFyY2hSZXNwb25zZS50ZXh0KCl9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgdmVjdG9yRGF0YTogVmVjdG9yU2VhcmNoUmVzcG9uc2UgPSBhd2FpdCB2ZWN0b3JTZWFyY2hSZXNwb25zZS5qc29uKCk7XG5cbiAgICAvLyBTdGVwIDI6IENvbWJpbmUgdmVjdG9yaXplZCBjaHVua3MgaW50byBjb250ZXh0XG4gICAgY29uc3QgcmVsZXZhbnRDb250ZXh0ID0gdmVjdG9yRGF0YS5yZXN1bHQuZGF0YV9hcnJheVxuICAgICAgLm1hcCgoW2NvbnRlbnRdKSA9PiBjb250ZW50KVxuICAgICAgLmpvaW4oJ1xcbicpO1xuXG4gICAgLy8gU3RlcCAzOiBTZW5kIGNvbWJpbmVkIGNvbnRleHQsIHF1ZXJ5LCBhbmQgc3lzdGVtIHByb21wdCB0byB0aGUgTGxhbWEgZW5kcG9pbnRcbiAgICBjb25zdCBsbGFtYVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICBjb25maWcubGxhbWFFbmRwb2ludFVybCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtCdWZmZXIuZnJvbShgdG9rZW46JHtjb25maWcuZGF0YWJyaWNrc0FwaVRva2VufWApLnRvU3RyaW5nKCdiYXNlNjQnKX1gLCAvLyBVc2UgdGhlIHNlcnZpY2UgdG9rZW5cbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGAke2Jhc2VQcm9tcHR9XFxuXFxuJHtyZWxldmFudENvbnRleHR9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5wcmV2aW91c01lc3NhZ2VzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGZpbmFsUXVlcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAoIWxsYW1hUmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTGxhbWEgQVBJIGVycm9yOiAke2F3YWl0IGxsYW1hUmVzcG9uc2UudGV4dCgpfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGxsYW1hRGF0YTogTGxhbWFSZXNwb25zZSA9IGF3YWl0IGxsYW1hUmVzcG9uc2UuanNvbigpO1xuXG4gICAgLy8gTG9nIGxsYW1hRGF0YSBmb3IgZGVidWdnaW5nXG4gICAgY29uc29sZS5sb2coJ0xsYW1hIEFQSSBSZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShsbGFtYURhdGEsIG51bGwsIDIpKTtcblxuICAgIC8vIEV4dHJhY3QgdGhlIGFzc2lzdGFudCdzIHJlc3BvbnNlIGZyb20gdGhlIExsYW1hIEFQSSByZXNwb25zZVxuICAgIGNvbnN0IGFzc2lzdGFudFJlc3BvbnNlID0gbGxhbWFEYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudCB8fCAnTm8gcmVzcG9uc2UgcmVjZWl2ZWQuJztcblxuICAgIC8vIFN0ZXAgNDogU3RvcmUgaW50ZXJhY3Rpb24gZGF0YSBpbiBBenVyZSBTdG9yYWdlIFRhYmxlc1xuICAgIGNvbnN0IGludGVyYWN0aW9uRW50aXR5OiBUYWJsZUVudGl0eSA9IHtcbiAgICAgIHBhcnRpdGlvbktleTogY3VycmVudERhdGUsXG4gICAgICByb3dLZXk6IGludGVyYWN0aW9uSWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVzZXJTZWxlY3Rpb25zOiBKU09OLnN0cmluZ2lmeSh1c2VyU2VsZWN0aW9ucyB8fCB7fSksXG4gICAgICBxdWVyeTogZmluYWxRdWVyeSxcbiAgICAgIGFzc2lzdGFudFJlc3BvbnNlOiBhc3Npc3RhbnRSZXNwb25zZVxuICAgIH07XG5cbiAgICBhd2FpdCB0YWJsZUNsaWVudC5jcmVhdGVFbnRpdHkoaW50ZXJhY3Rpb25FbnRpdHkpO1xuXG4gICAgLy8gU3RlcCA1OiBSZXNwb25kIHdpdGggdGhlIHJlc3VsdCBhbmQgaW50ZXJhY3Rpb24gSURcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgaW50ZXJhY3Rpb25JZDogaW50ZXJhY3Rpb25JZCxcbiAgICAgIG1hbmlmZXN0OiB2ZWN0b3JEYXRhLm1hbmlmZXN0LFxuICAgICAgcmVzdWx0OiB7XG4gICAgICAgIHJvd19jb3VudDogMSxcbiAgICAgICAgZGF0YV9hcnJheTogW1thc3Npc3RhbnRSZXNwb25zZSwgMS4wXV0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY2hhdCBBUEkgcm91dGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyByZXF1ZXN0JyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImZvcm1hdFNlbGVjdGlvbnNGb3JRdWVyeSIsIlRhYmxlQ2xpZW50IiwidjQiLCJ1dWlkdjQiLCJjb25maWciLCJmcyIsInBhdGgiLCJ0YWJsZUNsaWVudCIsImZyb21Db25uZWN0aW9uU3RyaW5nIiwiYXp1cmVTdG9yYWdlQ29ubmVjdGlvblN0cmluZyIsImF6dXJlVGFibGVOYW1lIiwiYmFzZVByb21wdFBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImJhc2VQcm9tcHQiLCJyZWFkRmlsZVN5bmMiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJQT1NUIiwicmVxIiwicXVlcnkiLCJ1c2VyU2VsZWN0aW9ucyIsIm9hdXRoVG9rZW4iLCJwcmV2aW91c01lc3NhZ2VzIiwianNvbiIsInN0YXR1cyIsImZpbmFsUXVlcnkiLCJpbnRlcmFjdGlvbklkIiwiZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsIlN0cmluZyIsImdldFVUQ01vbnRoIiwicGFkU3RhcnQiLCJkYXkiLCJnZXRVVENEYXRlIiwiY3VycmVudERhdGUiLCJ2ZWN0b3JTZWFyY2hSZXNwb25zZSIsImZldGNoIiwiZGF0YWJyaWNrc0hvc3QiLCJ2ZWN0b3JTZWFyY2hJbmRleE5hbWUiLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImRhdGFicmlja3NBcGlUb2tlbiIsIkFjY2VwdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibnVtX3Jlc3VsdHMiLCJudW1WZWN0b3JSZXN1bHRzIiwiY29sdW1ucyIsInF1ZXJ5X3RleHQiLCJvayIsIkVycm9yIiwidGV4dCIsInZlY3RvckRhdGEiLCJyZWxldmFudENvbnRleHQiLCJyZXN1bHQiLCJkYXRhX2FycmF5IiwibWFwIiwiY29udGVudCIsImxsYW1hUmVzcG9uc2UiLCJsbGFtYUVuZHBvaW50VXJsIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwibWVzc2FnZXMiLCJyb2xlIiwibGxhbWFEYXRhIiwiYXNzaXN0YW50UmVzcG9uc2UiLCJjaG9pY2VzIiwibWVzc2FnZSIsImludGVyYWN0aW9uRW50aXR5IiwicGFydGl0aW9uS2V5Iiwicm93S2V5IiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJjcmVhdGVFbnRpdHkiLCJtYW5pZmVzdCIsInJvd19jb3VudCIsImRldGFpbHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/config/config.ts":
/*!******************************!*\
  !*** ./src/config/config.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n\n\n// Load environment variables from .env.local\ndotenv__WEBPACK_IMPORTED_MODULE_0___default().config();\n// Define a schema for environment variables using Zod for validation\nconst envSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    // Public Variables\n    NEXT_PUBLIC_BASE_PROMPT: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    NEXT_PUBLIC_LLAMA_ENDPOINT_URL: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().url({\n        message: 'Invalid LLAMA_ENDPOINT_URL'\n    }),\n    // Private Variables\n    AZURE_STORAGE_CONNECTION_STRING: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, {\n        message: 'AZURE_STORAGE_CONNECTION_STRING is required'\n    }),\n    AZURE_TABLE_NAME: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().default('TravelAssociatesItineraryGenerationData'),\n    DATABRICKS_HOST: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, {\n        message: 'DATABRICKS_HOST is required'\n    }),\n    VECTOR_SEARCH_INDEX_NAME: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, {\n        message: 'VECTOR_SEARCH_INDEX_NAME is required'\n    }),\n    NUM_VECTOR_RESULTS: zod__WEBPACK_IMPORTED_MODULE_1__.z.coerce.number().int({\n        message: 'NUM_VECTOR_RESULTS must be an integer'\n    }).positive({\n        message: 'NUM_VECTOR_RESULTS must be a positive number'\n    }).optional().default(3),\n    DATABRICKS_API_TOKEN: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, {\n        message: 'DATABRICKS_API_TOKEN is required'\n    })\n});\n// Parse and validate environment variables\nconst parsedEnv = envSchema.safeParse(process.env);\nif (!parsedEnv.success) {\n    console.error('âŒ Invalid environment variables:', parsedEnv.error.format());\n    throw new Error('Invalid environment variables. Please check your configuration.');\n}\n// Export the validated and parsed configuration\nconst config = {\n    basePrompt: parsedEnv.data.NEXT_PUBLIC_BASE_PROMPT || '',\n    llamaEndpointUrl: parsedEnv.data.NEXT_PUBLIC_LLAMA_ENDPOINT_URL,\n    azureStorageConnectionString: parsedEnv.data.AZURE_STORAGE_CONNECTION_STRING,\n    azureTableName: parsedEnv.data.AZURE_TABLE_NAME,\n    databricksHost: parsedEnv.data.DATABRICKS_HOST,\n    vectorSearchIndexName: parsedEnv.data.VECTOR_SEARCH_INDEX_NAME,\n    numVectorResults: parsedEnv.data.NUM_VECTOR_RESULTS,\n    databricksApiToken: parsedEnv.data.DATABRICKS_API_TOKEN\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (config);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29uZmlnL2NvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRCO0FBQ0o7QUFFeEIsNkNBQTZDO0FBQzdDQSxvREFBYTtBQUViLHFFQUFxRTtBQUNyRSxNQUFNRyxZQUFZRixrQ0FBQ0EsQ0FBQ0csTUFBTSxDQUFDO0lBQ3pCLG1CQUFtQjtJQUNuQkMseUJBQXlCSixrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHQyxRQUFRO0lBQzVDQyxnQ0FBZ0NQLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdHLEdBQUcsQ0FBQztRQUFFQyxTQUFTO0lBQTZCO0lBRXZGLG9CQUFvQjtJQUNwQkMsaUNBQWlDVixrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHTSxHQUFHLENBQUMsR0FBRztRQUFFRixTQUFTO0lBQThDO0lBQzVHRyxrQkFBa0JaLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdRLE9BQU8sQ0FBQztJQUNyQ0MsaUJBQWlCZCxrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHTSxHQUFHLENBQUMsR0FBRztRQUFFRixTQUFTO0lBQThCO0lBQzVFTSwwQkFBMEJmLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1FBQUVGLFNBQVM7SUFBdUM7SUFDOUZPLG9CQUFvQmhCLGtDQUFDQSxDQUFDaUIsTUFBTSxDQUN6QkMsTUFBTSxHQUNOQyxHQUFHLENBQUM7UUFBRVYsU0FBUztJQUF3QyxHQUN2RFcsUUFBUSxDQUFDO1FBQUVYLFNBQVM7SUFBK0MsR0FDbkVILFFBQVEsR0FDUk8sT0FBTyxDQUFDO0lBQ1hRLHNCQUFzQnJCLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdNLEdBQUcsQ0FBQyxHQUFHO1FBQUVGLFNBQVM7SUFBbUM7QUFFeEY7QUFFQSwyQ0FBMkM7QUFDM0MsTUFBTWEsWUFBWXBCLFVBQVVxQixTQUFTLENBQUNDLFFBQVFDLEdBQUc7QUFFakQsSUFBSSxDQUFDSCxVQUFVSSxPQUFPLEVBQUU7SUFDdEJDLFFBQVFDLEtBQUssQ0FBQyxvQ0FBb0NOLFVBQVVNLEtBQUssQ0FBQ0MsTUFBTTtJQUN4RSxNQUFNLElBQUlDLE1BQU07QUFDbEI7QUFjQSxnREFBZ0Q7QUFDaEQsTUFBTTdCLFNBQWlCO0lBQ3JCOEIsWUFBWVQsVUFBVVUsSUFBSSxDQUFDNUIsdUJBQXVCLElBQUk7SUFDdEQ2QixrQkFBa0JYLFVBQVVVLElBQUksQ0FBQ3pCLDhCQUE4QjtJQUMvRDJCLDhCQUE4QlosVUFBVVUsSUFBSSxDQUFDdEIsK0JBQStCO0lBQzVFeUIsZ0JBQWdCYixVQUFVVSxJQUFJLENBQUNwQixnQkFBZ0I7SUFDL0N3QixnQkFBZ0JkLFVBQVVVLElBQUksQ0FBQ2xCLGVBQWU7SUFDOUN1Qix1QkFBdUJmLFVBQVVVLElBQUksQ0FBQ2pCLHdCQUF3QjtJQUM5RHVCLGtCQUFrQmhCLFVBQVVVLElBQUksQ0FBQ2hCLGtCQUFrQjtJQUNuRHVCLG9CQUFvQmpCLFVBQVVVLElBQUksQ0FBQ1gsb0JBQW9CO0FBQ3pEO0FBRUEsaUVBQWVwQixNQUFNQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvcGF1bG9iYXJib3NhL2dpdC9mY3RhLWNoYXRib3QvZnJvbnRlbmQvc3JjL2NvbmZpZy9jb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbi8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gLmVudi5sb2NhbFxuZG90ZW52LmNvbmZpZygpO1xuXG4vLyBEZWZpbmUgYSBzY2hlbWEgZm9yIGVudmlyb25tZW50IHZhcmlhYmxlcyB1c2luZyBab2QgZm9yIHZhbGlkYXRpb25cbmNvbnN0IGVudlNjaGVtYSA9IHoub2JqZWN0KHtcbiAgLy8gUHVibGljIFZhcmlhYmxlc1xuICBORVhUX1BVQkxJQ19CQVNFX1BST01QVDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBORVhUX1BVQkxJQ19MTEFNQV9FTkRQT0lOVF9VUkw6IHouc3RyaW5nKCkudXJsKHsgbWVzc2FnZTogJ0ludmFsaWQgTExBTUFfRU5EUE9JTlRfVVJMJyB9KSxcblxuICAvLyBQcml2YXRlIFZhcmlhYmxlc1xuICBBWlVSRV9TVE9SQUdFX0NPTk5FQ1RJT05fU1RSSU5HOiB6LnN0cmluZygpLm1pbigxLCB7IG1lc3NhZ2U6ICdBWlVSRV9TVE9SQUdFX0NPTk5FQ1RJT05fU1RSSU5HIGlzIHJlcXVpcmVkJyB9KSxcbiAgQVpVUkVfVEFCTEVfTkFNRTogei5zdHJpbmcoKS5kZWZhdWx0KCdUcmF2ZWxBc3NvY2lhdGVzSXRpbmVyYXJ5R2VuZXJhdGlvbkRhdGEnKSxcbiAgREFUQUJSSUNLU19IT1NUOiB6LnN0cmluZygpLm1pbigxLCB7IG1lc3NhZ2U6ICdEQVRBQlJJQ0tTX0hPU1QgaXMgcmVxdWlyZWQnIH0pLFxuICBWRUNUT1JfU0VBUkNIX0lOREVYX05BTUU6IHouc3RyaW5nKCkubWluKDEsIHsgbWVzc2FnZTogJ1ZFQ1RPUl9TRUFSQ0hfSU5ERVhfTkFNRSBpcyByZXF1aXJlZCcgfSksXG4gIE5VTV9WRUNUT1JfUkVTVUxUUzogei5jb2VyY2VcbiAgICAubnVtYmVyKClcbiAgICAuaW50KHsgbWVzc2FnZTogJ05VTV9WRUNUT1JfUkVTVUxUUyBtdXN0IGJlIGFuIGludGVnZXInIH0pXG4gICAgLnBvc2l0aXZlKHsgbWVzc2FnZTogJ05VTV9WRUNUT1JfUkVTVUxUUyBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyB9KVxuICAgIC5vcHRpb25hbCgpXG4gICAgLmRlZmF1bHQoMyksXG4gIERBVEFCUklDS1NfQVBJX1RPS0VOOiB6LnN0cmluZygpLm1pbigxLCB7IG1lc3NhZ2U6ICdEQVRBQlJJQ0tTX0FQSV9UT0tFTiBpcyByZXF1aXJlZCcgfSksXG4gIC8vIEFkZCBhbnkgYWRkaXRpb25hbCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaGVyZVxufSk7XG5cbi8vIFBhcnNlIGFuZCB2YWxpZGF0ZSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IHBhcnNlZEVudiA9IGVudlNjaGVtYS5zYWZlUGFyc2UocHJvY2Vzcy5lbnYpO1xuXG5pZiAoIXBhcnNlZEVudi5zdWNjZXNzKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ+KdjCBJbnZhbGlkIGVudmlyb25tZW50IHZhcmlhYmxlczonLCBwYXJzZWRFbnYuZXJyb3IuZm9ybWF0KCkpO1xuICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW52aXJvbm1lbnQgdmFyaWFibGVzLiBQbGVhc2UgY2hlY2sgeW91ciBjb25maWd1cmF0aW9uLicpO1xufVxuXG4vLyBEZWZpbmUgYSBUeXBlU2NyaXB0IGludGVyZmFjZSBmb3IgY29uZmlndXJhdGlvbiAob3B0aW9uYWwgYnV0IHJlY29tbWVuZGVkKVxuaW50ZXJmYWNlIENvbmZpZyB7XG4gIGJhc2VQcm9tcHQ6IHN0cmluZztcbiAgbGxhbWFFbmRwb2ludFVybDogc3RyaW5nO1xuICBhenVyZVN0b3JhZ2VDb25uZWN0aW9uU3RyaW5nOiBzdHJpbmc7XG4gIGF6dXJlVGFibGVOYW1lOiBzdHJpbmc7XG4gIGRhdGFicmlja3NIb3N0OiBzdHJpbmc7XG4gIHZlY3RvclNlYXJjaEluZGV4TmFtZTogc3RyaW5nO1xuICBudW1WZWN0b3JSZXN1bHRzOiBudW1iZXI7XG4gIGRhdGFicmlja3NBcGlUb2tlbjogc3RyaW5nO1xufVxuXG4vLyBFeHBvcnQgdGhlIHZhbGlkYXRlZCBhbmQgcGFyc2VkIGNvbmZpZ3VyYXRpb25cbmNvbnN0IGNvbmZpZzogQ29uZmlnID0ge1xuICBiYXNlUHJvbXB0OiBwYXJzZWRFbnYuZGF0YS5ORVhUX1BVQkxJQ19CQVNFX1BST01QVCB8fCAnJyxcbiAgbGxhbWFFbmRwb2ludFVybDogcGFyc2VkRW52LmRhdGEuTkVYVF9QVUJMSUNfTExBTUFfRU5EUE9JTlRfVVJMLFxuICBhenVyZVN0b3JhZ2VDb25uZWN0aW9uU3RyaW5nOiBwYXJzZWRFbnYuZGF0YS5BWlVSRV9TVE9SQUdFX0NPTk5FQ1RJT05fU1RSSU5HLFxuICBhenVyZVRhYmxlTmFtZTogcGFyc2VkRW52LmRhdGEuQVpVUkVfVEFCTEVfTkFNRSxcbiAgZGF0YWJyaWNrc0hvc3Q6IHBhcnNlZEVudi5kYXRhLkRBVEFCUklDS1NfSE9TVCxcbiAgdmVjdG9yU2VhcmNoSW5kZXhOYW1lOiBwYXJzZWRFbnYuZGF0YS5WRUNUT1JfU0VBUkNIX0lOREVYX05BTUUsXG4gIG51bVZlY3RvclJlc3VsdHM6IHBhcnNlZEVudi5kYXRhLk5VTV9WRUNUT1JfUkVTVUxUUyxcbiAgZGF0YWJyaWNrc0FwaVRva2VuOiBwYXJzZWRFbnYuZGF0YS5EQVRBQlJJQ0tTX0FQSV9UT0tFTixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcbiJdLCJuYW1lcyI6WyJkb3RlbnYiLCJ6IiwiY29uZmlnIiwiZW52U2NoZW1hIiwib2JqZWN0IiwiTkVYVF9QVUJMSUNfQkFTRV9QUk9NUFQiLCJzdHJpbmciLCJvcHRpb25hbCIsIk5FWFRfUFVCTElDX0xMQU1BX0VORFBPSU5UX1VSTCIsInVybCIsIm1lc3NhZ2UiLCJBWlVSRV9TVE9SQUdFX0NPTk5FQ1RJT05fU1RSSU5HIiwibWluIiwiQVpVUkVfVEFCTEVfTkFNRSIsImRlZmF1bHQiLCJEQVRBQlJJQ0tTX0hPU1QiLCJWRUNUT1JfU0VBUkNIX0lOREVYX05BTUUiLCJOVU1fVkVDVE9SX1JFU1VMVFMiLCJjb2VyY2UiLCJudW1iZXIiLCJpbnQiLCJwb3NpdGl2ZSIsIkRBVEFCUklDS1NfQVBJX1RPS0VOIiwicGFyc2VkRW52Iiwic2FmZVBhcnNlIiwicHJvY2VzcyIsImVudiIsInN1Y2Nlc3MiLCJjb25zb2xlIiwiZXJyb3IiLCJmb3JtYXQiLCJFcnJvciIsImJhc2VQcm9tcHQiLCJkYXRhIiwibGxhbWFFbmRwb2ludFVybCIsImF6dXJlU3RvcmFnZUNvbm5lY3Rpb25TdHJpbmciLCJhenVyZVRhYmxlTmFtZSIsImRhdGFicmlja3NIb3N0IiwidmVjdG9yU2VhcmNoSW5kZXhOYW1lIiwibnVtVmVjdG9yUmVzdWx0cyIsImRhdGFicmlja3NBcGlUb2tlbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/config/config.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/formatSelections.tsx":
/*!****************************************!*\
  !*** ./src/utils/formatSelections.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatSelectionsForQuery: () => (/* binding */ formatSelectionsForQuery)\n/* harmony export */ });\n// This is just a helper to turn userSelections into a text-based query.\nfunction formatSelectionsForQuery(userSelections) {\n    let queryString = \"\";\n    // For each top-level key in userSelections (like vibes, season, accommodation, activities)\n    for (const selectionKey of Object.keys(userSelections)){\n        // userSelections[selectionKey] is an array of objects\n        const selectionArray = userSelections[selectionKey];\n        queryString += `\\n=== ${selectionKey.toUpperCase()} ===\\n`;\n        selectionArray.forEach((item, index)=>{\n            const category = item.category ? `Category: ${item.category}\\n` : \"\";\n            const keywords = item.keywords?.length ? `Keywords: ${item.keywords.join(\", \")}\\n` : \"\";\n            const notes = item.notes ? `Notes: ${item.notes}\\n` : \"\";\n            queryString += `Selection ${index + 1}:\\n${category}${keywords}${notes}\\n`;\n        });\n    }\n    return queryString;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvZm9ybWF0U2VsZWN0aW9ucy50c3giLCJtYXBwaW5ncyI6Ijs7OztBQUFBLHdFQUF3RTtBQUNqRSxTQUFTQSx5QkFBeUJDLGNBQW1CO0lBQ3hELElBQUlDLGNBQWM7SUFFbEIsMkZBQTJGO0lBQzNGLEtBQUssTUFBTUMsZ0JBQWdCQyxPQUFPQyxJQUFJLENBQUNKLGdCQUFpQjtRQUNwRCxzREFBc0Q7UUFDdEQsTUFBTUssaUJBQWlCTCxjQUFjLENBQUNFLGFBQWE7UUFFbkRELGVBQWUsQ0FBQyxNQUFNLEVBQUVDLGFBQWFJLFdBQVcsR0FBRyxNQUFNLENBQUM7UUFFMURELGVBQWVFLE9BQU8sQ0FBQyxDQUFDQyxNQUFXQztZQUMvQixNQUFNQyxXQUFXRixLQUFLRSxRQUFRLEdBQUcsQ0FBQyxVQUFVLEVBQUVGLEtBQUtFLFFBQVEsQ0FBQyxFQUFFLENBQUMsR0FBRztZQUNsRSxNQUFNQyxXQUFXSCxLQUFLRyxRQUFRLEVBQUVDLFNBQzFCLENBQUMsVUFBVSxFQUFFSixLQUFLRyxRQUFRLENBQUNFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUN6QztZQUNOLE1BQU1DLFFBQVFOLEtBQUtNLEtBQUssR0FBRyxDQUFDLE9BQU8sRUFBRU4sS0FBS00sS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHO1lBRXREYixlQUFlLENBQUMsVUFBVSxFQUFFUSxRQUFRLEVBQUUsR0FBRyxFQUFFQyxXQUFXQyxXQUFXRyxNQUFNLEVBQUUsQ0FBQztRQUM5RTtJQUNKO0lBQ0EsT0FBT2I7QUFDWCIsInNvdXJjZXMiOlsiL1VzZXJzL3BhdWxvYmFyYm9zYS9naXQvZmN0YS1jaGF0Ym90L2Zyb250ZW5kL3NyYy91dGlscy9mb3JtYXRTZWxlY3Rpb25zLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGlzIGp1c3QgYSBoZWxwZXIgdG8gdHVybiB1c2VyU2VsZWN0aW9ucyBpbnRvIGEgdGV4dC1iYXNlZCBxdWVyeS5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTZWxlY3Rpb25zRm9yUXVlcnkodXNlclNlbGVjdGlvbnM6IGFueSk6IHN0cmluZyB7XG4gICAgbGV0IHF1ZXJ5U3RyaW5nID0gXCJcIjtcblxuICAgIC8vIEZvciBlYWNoIHRvcC1sZXZlbCBrZXkgaW4gdXNlclNlbGVjdGlvbnMgKGxpa2UgdmliZXMsIHNlYXNvbiwgYWNjb21tb2RhdGlvbiwgYWN0aXZpdGllcylcbiAgICBmb3IgKGNvbnN0IHNlbGVjdGlvbktleSBvZiBPYmplY3Qua2V5cyh1c2VyU2VsZWN0aW9ucykpIHtcbiAgICAgICAgLy8gdXNlclNlbGVjdGlvbnNbc2VsZWN0aW9uS2V5XSBpcyBhbiBhcnJheSBvZiBvYmplY3RzXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkFycmF5ID0gdXNlclNlbGVjdGlvbnNbc2VsZWN0aW9uS2V5XTtcblxuICAgICAgICBxdWVyeVN0cmluZyArPSBgXFxuPT09ICR7c2VsZWN0aW9uS2V5LnRvVXBwZXJDYXNlKCl9ID09PVxcbmA7XG5cbiAgICAgICAgc2VsZWN0aW9uQXJyYXkuZm9yRWFjaCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yeSA9IGl0ZW0uY2F0ZWdvcnkgPyBgQ2F0ZWdvcnk6ICR7aXRlbS5jYXRlZ29yeX1cXG5gIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRzID0gaXRlbS5rZXl3b3Jkcz8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBgS2V5d29yZHM6ICR7aXRlbS5rZXl3b3Jkcy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IG5vdGVzID0gaXRlbS5ub3RlcyA/IGBOb3RlczogJHtpdGVtLm5vdGVzfVxcbmAgOiBcIlwiO1xuXG4gICAgICAgICAgICBxdWVyeVN0cmluZyArPSBgU2VsZWN0aW9uICR7aW5kZXggKyAxfTpcXG4ke2NhdGVnb3J5fSR7a2V5d29yZHN9JHtub3Rlc31cXG5gO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xufVxuIl0sIm5hbWVzIjpbImZvcm1hdFNlbGVjdGlvbnNGb3JRdWVyeSIsInVzZXJTZWxlY3Rpb25zIiwicXVlcnlTdHJpbmciLCJzZWxlY3Rpb25LZXkiLCJPYmplY3QiLCJrZXlzIiwic2VsZWN0aW9uQXJyYXkiLCJ0b1VwcGVyQ2FzZSIsImZvckVhY2giLCJpdGVtIiwiaW5kZXgiLCJjYXRlZ29yeSIsImtleXdvcmRzIiwibGVuZ3RoIiwiam9pbiIsIm5vdGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/formatSelections.tsx\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@azure","vendor-chunks/fast-xml-parser","vendor-chunks/uuid","vendor-chunks/debug","vendor-chunks/https-proxy-agent","vendor-chunks/dotenv","vendor-chunks/agent-base","vendor-chunks/zod","vendor-chunks/tslib","vendor-chunks/supports-color","vendor-chunks/strnum","vendor-chunks/ms","vendor-chunks/http-proxy-agent","vendor-chunks/has-flag"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Froute&page=%2Fapi%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Froute.ts&appDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulobarbosa%2Fgit%2Ffcta-chatbot%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();